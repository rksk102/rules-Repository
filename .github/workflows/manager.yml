name: "0. ğŸ¤– Master Orchestrator"

on:
  # 1. è¿™é‡Œå®šä¹‰ä½ éœ€è¦è¿è¡Œçš„æ—¶é—´ (ä¾‹å¦‚åŒ—äº¬æ—¶é—´æ¯å¤©å‡Œæ™¨ 4:00)
  # UTC 20:00 = åŒ—äº¬ 04:00
  schedule:
    # å¯¹åº”åŒ—äº¬æ—¶é—´ 01:00 (å‰ä¸€å¤© UTC 17:00)
    - cron: '0 17 * * *'
    
    # å¯¹åº”åŒ—äº¬æ—¶é—´ 14:00 (å½“å¤© UTC 06:00)
    - cron: '0 6 * * *'
  
  # 2. å…è®¸æ‰‹åŠ¨è§¦å‘æ•´ä¸ªé“¾æ¡
  workflow_dispatch:

permissions:
  actions: write  # å¿…é¡»æœ‰ï¼Œç”¨äºè§¦å‘å…¶ä»–å·¥ä½œæµ
  contents: read

jobs:
  orchestrate:
    runs-on: ubuntu-latest
    name: "ğŸ•¹ï¸ Run Workflow Plan"
    
    steps:
      - name: ğŸ“¥ Checkout Configuration
        uses: actions/checkout@v4

      - name: ğŸ Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: ğŸ•¹ï¸ Execute Plan
        env:
          # å¿…é¡»ä¼ å…¥ Token æ‰èƒ½ä½¿ç”¨ gh å‘½ä»¤
          GH_TOKEN: ${{ github.token }}
        run: |
          chmod +x scripts/orchestrator.py
          python3 scripts/orchestrator.py
